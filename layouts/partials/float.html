{{ if not .Site.Params.hideColorSchemeToggle }}
<div class="float-container">
  <a href="#" id="dark-mode-toggle" class="colorscheme-toggle" aria-label="Toggle color scheme">
    <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
  </a>
</div>
{{ end }}

<style>
  #cursor-color {
    height: 30vh;
    aspect-ratio: 1;
    position: absolute;
    left: 50%;
    top: 50%;
    translate: -50% -50%;
    border-radius: 50%;
    background: #00417AB9;
    /* fallback for old browsers */
    background: -webkit-linear-gradient(to right, #A2A790, #00417AB9);
    /* Chrome 10-25, Safari 5.1-6 */
    background: linear-gradient(to right, #ABC544, #1472CBE7);
    /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
    animation: rotate 15s infinite;
    filter: blur(150px);
    z-index: -1;
  }

  #blur {
    width: 100%;
    height: 100wh;
    position: relative;
    z-index: -1;
    backdrop-filter: blur(200px);
  }

  @keyframes rotate {
    from {
      rotate: 0deg;
    }

    50% {
      scale: 1 1.5;
    }

    to {
      rotate: 360deg;
    }
  }
</style>
<div id="cursor-color"></div>
<div id="blur"></div>
<script>
  // Cursor Color Blur
  const cursorColor = document.getElementById("cursor-color");
  document.body.onpointermove = (event) => {
    const { clientX, clientY } = event;
    cursorColor.animate({
      left: `${clientX}px`,
      top: `${clientY}px`,
    }, { duration: 1000, fill: "forwards" });
  };
</script>


<div id="trailer">
  <i id="trailer-icon" aria-hidden="true"></i>
</div>

<style>
  /* body:hover > #trailer {
    opacity: 1;
  } */

  /* #trailer:not([class=""])> */
  #trailer-icon {
    opacity: 1;
    color: #05182a;
    margin-top: -20px;
  }

  #trailer-icon {
    font-size: 10px;
    line-height: 60px;
    /* opacity: 0; */
    transition: opacity 400ms ease;
  }

  #trailer {
    height: 20px;
    width: 20px;
    background-color: white;
    border-radius: 20px;

    position: fixed;
    left: 0px;
    top: 0px;
    z-index: 1000;

    pointer-events: none;
    opacity: 0;
    transition: opacity 600ms ease;
    display: grid;
    place-items: center;
  }

  body.colorscheme-dark .navigation a:hover,
  body.colorscheme-dark .navigation a:focus {
    color: white;
  }

  .navigation a,
  .navigation span {
    color: #05182a;
  }

  .navigation a:hover,
  .navigation span:hover,
  .list ul li .title:hover {
    color: #5252FF;
  }

  a:hover {
    font-size: 130%;
  }

  a i:hover {
    font-size: 175%;
  }
</style>
<script>
  if (3 > window.location.pathname.split('/').length) {
    document.body.style.overflow = "clip";
  } else {
    document.body.style.overflowX = "clip";
  }

  const trailer = document.getElementById("trailer");

  const animateTrailer = (e, interacting) => {
    const { clientX, clientY } = e;
    const x = clientX - trailer.offsetWidth / 2,
      y = clientY - trailer.offsetHeight / 2;
    const keyframes = {
      transform: `translate(${x}px, ${y}px) scale(${interacting ? 2.5 : 0.75})`,
      opacity: `${interacting ? 0.5 : 1}`
    };

    trailer.animate(keyframes, { duration: 350, fill: "forwards" });
  };

  const getTailerClass = (type) => {
    switch (type) {
      case "video":
        return "fa fa-play";
      case "title":
        return "fa fa-file-text-o";
      default:
        return "fa fa-location-arrow";
    }
  };

  window.onmousemove = e => {
    const interactable = e.target.closest("a"),
      interacting = interactable !== null;
    const icon = document.getElementById("trailer-icon");
    animateTrailer(e, interacting);
    trailer.className = interacting ? interactable.className : "";
    if (interacting) {
      icon.className = getTailerClass(interactable.className);
    } else {
      icon.className = "";
    }
  };

</script>